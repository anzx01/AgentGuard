(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{8176:function(e,t,a){Promise.resolve().then(a.bind(a,71)),Promise.resolve().then(a.bind(a,1351))},71:function(e,t,a){"use strict";a.d(t,{default:function(){return c}});var r=a(7573),n=a(8146),s=a(1695),l=a(5118),o=a(607);let i=[{href:"/dashboard",label:"总览",icon:"◉"},{href:"/dashboard/agents",label:"Agent",icon:"⬡"},{href:"/dashboard/rules",label:"规则",icon:"⚙"},{href:"/dashboard/logs",label:"日志",icon:"≡"},{href:"/dashboard/alerts",label:"告警",icon:"⚠"},{href:"/dashboard/settings",label:"设置",icon:"⊙"}];function c(){let e=(0,s.usePathname)();return(0,r.jsxs)("aside",{className:"w-52 shrink-0 bg-gray-900 border-r border-gray-800 flex flex-col min-h-screen",children:[(0,r.jsxs)("div",{className:"px-4 py-5 border-b border-gray-800",children:[(0,r.jsx)("span",{className:"font-bold text-white text-lg",children:"AgentGuard"}),(0,r.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"v1.0"})]}),(0,r.jsx)("nav",{className:"flex-1 py-4 space-y-1 px-2",children:i.map(t=>(0,r.jsxs)(n.default,{href:t.href,className:(0,o.Z)("flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors",e===t.href?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[(0,r.jsx)("span",{children:t.icon}),(0,r.jsx)("span",{children:t.label})]},t.href))}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-800",children:(0,r.jsx)("button",{onClick:l.kS,className:"w-full text-left text-xs text-gray-500 hover:text-gray-300 transition-colors",children:"退出登录"})})]})}},1351:function(e,t,a){"use strict";a.d(t,{default:function(){return l}});var r=a(7573),n=a(7653),s=a(5118);function l(){let[e,t]=(0,n.useState)({global:{paused:!1}}),[a,l]=(0,n.useState)(!1);async function o(){if(e.global.paused)await (0,s.SC)("/kill-switch/deactivate",{method:"POST",body:JSON.stringify({scope:"global"})}),t({global:{paused:!1}});else{if(!a){l(!0);return}await (0,s.SC)("/kill-switch/activate",{method:"POST",body:JSON.stringify({reason:"手动触发",scope:"global"})}),t({global:{paused:!0}}),l(!1)}}return(0,n.useEffect)(()=>{(0,s.SC)("/kill-switch/status").then(t).catch(()=>{})},[]),(0,r.jsxs)("header",{className:"h-14 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-6 shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(e.global.paused?"bg-red-500":"bg-green-500")}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:e.global.paused?"已暂停":"运行中"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,r.jsx)("span",{className:"text-xs text-yellow-400",children:"再次点击确认暂停所有请求"}),(0,r.jsx)("button",{onClick:o,onBlur:()=>l(!1),className:"px-4 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat(e.global.paused?"bg-green-700 hover:bg-green-600 text-white":a?"bg-red-500 hover:bg-red-400 text-white":"bg-red-900 hover:bg-red-800 text-red-300"),children:e.global.paused?"▶ 恢复服务":"■ Kill Switch"})]})]})}},5118:function(e,t,a){"use strict";a.d(t,{SC:function(){return n},jl:function(){return s},kS:function(){return l}});let r=a(4859).env.NEXT_PUBLIC_API_URL||"/api";async function n(e,t){let a=localStorage.getItem("ag_token"),n=await fetch("".concat(r).concat(e),{...t,headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{},...null==t?void 0:t.headers}});if(401===n.status)throw localStorage.removeItem("ag_token"),window.location.href="/login",Error("Unauthorized");if(!n.ok)throw Error((await n.json().catch(()=>({}))).message||"HTTP ".concat(n.status));return n.json()}function s(){return!!localStorage.getItem("ag_token")}function l(){localStorage.removeItem("ag_token"),window.location.href="/login"}}},function(e){e.O(0,[975,293,528,744],function(){return e(e.s=8176)}),_N_E=e.O()}]);