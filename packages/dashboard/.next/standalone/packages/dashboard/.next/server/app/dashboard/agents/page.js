(()=>{var e={};e.id=638,e.ids=[638],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7513:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>g,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>i}),s(3038),s(4341),s(7718),s(7824);var a=s(3282),r=s(5736),n=s(3906),l=s.n(n),d=s(6880),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(t,o);let i=["",{children:["dashboard",{children:["agents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3038)),"G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\dashboard\\agents\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4341)),"G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7718)),"G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7824,23)),"next/dist/client/components/not-found-error"]}],c=["G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\dashboard\\agents\\page.tsx"],x="/dashboard/agents/page",g={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/agents/page",pathname:"/dashboard/agents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},4224:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4424,23)),Promise.resolve().then(s.t.bind(s,7752,23)),Promise.resolve().then(s.t.bind(s,5275,23)),Promise.resolve().then(s.t.bind(s,9842,23)),Promise.resolve().then(s.t.bind(s,1633,23)),Promise.resolve().then(s.t.bind(s,9224,23))},5853:(e,t,s)=>{Promise.resolve().then(s.bind(s,4105))},8144:()=>{},2684:(e,t,s)=>{Promise.resolve().then(s.bind(s,1394)),Promise.resolve().then(s.bind(s,8946))},4105:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(3227),r=s(3677),n=s(7674);function l(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[d,o]=(0,r.useState)({name:"",description:""}),[i,c]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[h,u]=(0,r.useState)("");async function m(){t((await (0,n.SC)("/agents")).agents)}async function b(e){e.preventDefault(),g(!0),u("");try{let e=await (0,n.SC)("/agents",{method:"POST",body:JSON.stringify(d)});c(e.token),l(!1),o({name:"",description:""}),m()}catch(e){u(e.message)}finally{g(!1)}}async function p(e){let t="active"===e.status?"pause":"resume";await (0,n.SC)(`/agents/${e.id}/${t}`,{method:"POST"}),m()}async function y(e){confirm("确认删除此 Agent？")&&(await (0,n.SC)(`/agents/${e}`,{method:"DELETE"}),m())}async function f(e){c((await (0,n.SC)(`/agents/${e}/rotate-token`,{method:"POST"})).token)}let j={active:"bg-green-500",paused:"bg-yellow-500",blocked:"bg-red-500"};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-xl font-semibold text-white",children:"Agent 管理"}),a.jsx("button",{onClick:()=>l(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"+ 新建 Agent"})]}),i&&(0,a.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-yellow-300 text-sm font-medium mb-2",children:"⚠ Agent Token（仅显示一次，请立即保存）"}),a.jsx("code",{className:"text-yellow-100 text-xs break-all bg-yellow-900/50 px-3 py-2 rounded block",children:i}),a.jsx("button",{onClick:()=>c(null),className:"mt-2 text-xs text-yellow-500 hover:text-yellow-300",children:"关闭"})]}),s&&(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-5",children:[a.jsx("h2",{className:"text-sm font-medium text-gray-300 mb-4",children:"新建 Agent"}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"名称 *"}),a.jsx("input",{value:d.name,onChange:e=>o(t=>({...t,name:e.target.value})),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-blue-500",placeholder:"my-agent",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"描述"}),a.jsx("input",{value:d.description,onChange:e=>o(t=>({...t,description:e.target.value})),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-blue-500",placeholder:"用途描述"})]}),h&&a.jsx("p",{className:"text-red-400 text-xs",children:h}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",disabled:x,className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg text-sm",children:x?"创建中...":"创建"}),a.jsx("button",{type:"button",onClick:()=>l(!1),className:"bg-gray-800 hover:bg-gray-700 text-gray-300 px-4 py-2 rounded-lg text-sm",children:"取消"})]})]})]}),0===e.length&&!s&&(0,a.jsxs)("div",{className:"text-center py-16 text-gray-500",children:[a.jsx("p",{className:"text-4xl mb-3",children:"⬡"}),a.jsx("p",{children:'暂无 Agent，点击"新建 Agent"开始'})]}),a.jsx("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${j[e.status]??"bg-gray-500"}`}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-white",children:e.name}),e.description&&a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>p(e),className:"text-xs px-3 py-1 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-300",children:"active"===e.status?"暂停":"恢复"}),a.jsx("button",{onClick:()=>f(e.id),className:"text-xs px-3 py-1 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-300",children:"重置 Token"}),a.jsx("button",{onClick:()=>y(e.id),className:"text-xs px-3 py-1 rounded-lg bg-red-900/50 hover:bg-red-900 text-red-400",children:"删除"})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Token: ",(0,a.jsxs)("code",{className:"text-gray-400",children:[e.token_prefix??"ag_live_","..."]})]}),(0,a.jsxs)("span",{children:["创建于 ",new Date(e.created_at).toLocaleDateString()]}),e.last_seen_at&&(0,a.jsxs)("span",{children:["最后活跃 ",new Date(e.last_seen_at).toLocaleString()]})]})]},e.id))})]})}},1394:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(3227),r=s(649),n=s(1043),l=s(7674),d=s(1126);let o=[{href:"/dashboard",label:"总览",icon:"◉"},{href:"/dashboard/agents",label:"Agent",icon:"⬡"},{href:"/dashboard/rules",label:"规则",icon:"⚙"},{href:"/dashboard/logs",label:"日志",icon:"≡"},{href:"/dashboard/alerts",label:"告警",icon:"⚠"},{href:"/dashboard/settings",label:"设置",icon:"⊙"}];function i(){let e=(0,n.usePathname)();return(0,a.jsxs)("aside",{className:"w-52 shrink-0 bg-gray-900 border-r border-gray-800 flex flex-col min-h-screen",children:[(0,a.jsxs)("div",{className:"px-4 py-5 border-b border-gray-800",children:[a.jsx("span",{className:"font-bold text-white text-lg",children:"AgentGuard"}),a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"v1.0"})]}),a.jsx("nav",{className:"flex-1 py-4 space-y-1 px-2",children:o.map(t=>(0,a.jsxs)(r.default,{href:t.href,className:(0,d.Z)("flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors",e===t.href?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[a.jsx("span",{children:t.icon}),a.jsx("span",{children:t.label})]},t.href))}),a.jsx("div",{className:"p-4 border-t border-gray-800",children:a.jsx("button",{onClick:l.kS,className:"w-full text-left text-xs text-gray-500 hover:text-gray-300 transition-colors",children:"退出登录"})})]})}},8946:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(3227),r=s(3677),n=s(7674);function l(){let[e,t]=(0,r.useState)({global:{paused:!1}}),[s,l]=(0,r.useState)(!1);async function d(){if(e.global.paused)await (0,n.SC)("/kill-switch/deactivate",{method:"POST",body:JSON.stringify({scope:"global"})}),t({global:{paused:!1}});else{if(!s){l(!0);return}await (0,n.SC)("/kill-switch/activate",{method:"POST",body:JSON.stringify({reason:"手动触发",scope:"global"})}),t({global:{paused:!0}}),l(!1)}}return(0,a.jsxs)("header",{className:"h-14 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-6 shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${e.global.paused?"bg-red-500":"bg-green-500"}`}),a.jsx("span",{className:"text-sm text-gray-400",children:e.global.paused?"已暂停":"运行中"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[s&&a.jsx("span",{className:"text-xs text-yellow-400",children:"再次点击确认暂停所有请求"}),a.jsx("button",{onClick:d,onBlur:()=>l(!1),className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-colors ${e.global.paused?"bg-green-700 hover:bg-green-600 text-white":s?"bg-red-500 hover:bg-red-400 text-white":"bg-red-900 hover:bg-red-800 text-red-300"}`,children:e.global.paused?"▶ 恢复服务":"■ Kill Switch"})]})]})}},7674:(e,t,s)=>{"use strict";s.d(t,{SC:()=>r,kS:()=>n});let a=process.env.NEXT_PUBLIC_API_URL||"/api";async function r(e,t){let s=await fetch(`${a}${e}`,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(401===s.status)throw Error("Unauthorized");if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||`HTTP ${s.status}`);return s.json()}function n(){localStorage.removeItem("ag_token"),window.location.href="/login"}},3038:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(3189).createProxy)(String.raw`G:\myaist\AgentGuard\packages\dashboard\src\app\dashboard\agents\page.tsx#default`)},4341:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(9013),r=s(3189);let n=(0,r.createProxy)(String.raw`G:\myaist\AgentGuard\packages\dashboard\src\components\Sidebar.tsx#default`),l=(0,r.createProxy)(String.raw`G:\myaist\AgentGuard\packages\dashboard\src\components\TopBar.tsx#default`);function d({children:e}){return(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[a.jsx(n,{}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(l,{}),a.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-950",children:e})]})]})}},7718:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>r});var a=s(9013);s(5556);let r={title:"AgentGuard",description:"AI Agent API 安全代理网关"};function n({children:e}){return a.jsx("html",{lang:"zh-CN",children:a.jsx("body",{className:"bg-gray-950 text-gray-100 min-h-screen",children:e})})}},5556:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[592,914],()=>s(7513));module.exports=a})();