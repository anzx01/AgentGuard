(()=>{var e={};e.id=480,e.ids=[480],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3493:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>c,routeModule:()=>g,tree:()=>d}),a(3243),a(4341),a(7718),a(7824);var s=a(3282),r=a(5736),l=a(3906),n=a.n(l),i=a(6880),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["dashboard",{children:["alerts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3243)),"G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\dashboard\\alerts\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4341)),"G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,7718)),"G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7824,23)),"next/dist/client/components/not-found-error"]}],c=["G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\dashboard\\alerts\\page.tsx"],x="/dashboard/alerts/page",h={require:a,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/alerts/page",pathname:"/dashboard/alerts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4224:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,4424,23)),Promise.resolve().then(a.t.bind(a,7752,23)),Promise.resolve().then(a.t.bind(a,5275,23)),Promise.resolve().then(a.t.bind(a,9842,23)),Promise.resolve().then(a.t.bind(a,1633,23)),Promise.resolve().then(a.t.bind(a,9224,23))},6066:(e,t,a)=>{Promise.resolve().then(a.bind(a,4592))},8144:()=>{},2684:(e,t,a)=>{Promise.resolve().then(a.bind(a,1394)),Promise.resolve().then(a.bind(a,8946))},4592:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(3227),r=a(3677),l=a(7674);let n={critical:"bg-red-500/20 text-red-400 border-red-800",high:"bg-orange-500/20 text-orange-400 border-orange-800",medium:"bg-yellow-500/20 text-yellow-400 border-yellow-800",low:"bg-gray-500/20 text-gray-400 border-gray-700",info:"bg-blue-500/20 text-blue-400 border-blue-800"};function i(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(0),[o,d]=(0,r.useState)({status:"open",severity:""}),[c,x]=(0,r.useState)([]);async function h(){let e=new URLSearchParams({pageSize:"50",...o.status&&{status:o.status},...o.severity&&{severity:o.severity}}),a=await (0,l.SC)(`/alerts?${e}`);t(a.data),i(a.total)}async function g(e){await (0,l.SC)(`/alerts/${e}/acknowledge`,{method:"POST",body:JSON.stringify({})}),h()}async function u(){c.length&&(await (0,l.SC)("/alerts/batch-acknowledge",{method:"POST",body:JSON.stringify({ids:c})}),x([]),h())}let p={critical:e.filter(e=>"critical"===e.severity).length,high:e.filter(e=>"high"===e.severity).length,medium:e.filter(e=>"medium"===e.severity).length,open:e.filter(e=>"open"===e.status).length};return(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-white",children:"告警中心"}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"CRITICAL",value:p.critical,color:"text-red-400"},{label:"HIGH",value:p.high,color:"text-orange-400"},{label:"MEDIUM",value:p.medium,color:"text-yellow-400"},{label:"待处理",value:p.open,color:"text-white"}].map(e=>(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4 text-center",children:[s.jsx("p",{className:`text-2xl font-bold ${e.color}`,children:e.value}),s.jsx("p",{className:"text-gray-500 text-xs mt-1",children:e.label})]},e.label))}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("select",{value:o.status,onChange:e=>d(t=>({...t,status:e.target.value})),className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-gray-300 focus:outline-none",children:[s.jsx("option",{value:"",children:"全部状态"}),s.jsx("option",{value:"open",children:"未处理"}),s.jsx("option",{value:"acknowledged",children:"已确认"})]}),(0,s.jsxs)("select",{value:o.severity,onChange:e=>d(t=>({...t,severity:e.target.value})),className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-gray-300 focus:outline-none",children:[s.jsx("option",{value:"",children:"全部严重度"}),s.jsx("option",{value:"critical",children:"CRITICAL"}),s.jsx("option",{value:"high",children:"HIGH"}),s.jsx("option",{value:"medium",children:"MEDIUM"}),s.jsx("option",{value:"low",children:"LOW"})]}),c.length>0&&(0,s.jsxs)("button",{onClick:u,className:"bg-blue-700 hover:bg-blue-600 text-white px-3 py-1.5 rounded-lg text-sm",children:["批量确认 (",c.length,")"]}),(0,s.jsxs)("span",{className:"text-gray-500 text-sm ml-auto",children:["共 ",a," 条"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[0===e.length&&(0,s.jsxs)("div",{className:"text-center py-16 text-gray-500",children:[s.jsx("p",{className:"text-4xl mb-3",children:"✓"}),s.jsx("p",{children:"暂无告警"})]}),e.map(e=>s.jsx("div",{className:`border rounded-xl p-4 ${n[e.severity]??"border-gray-800 bg-gray-900"} ${"acknowledged"===e.status?"opacity-50":""}`,children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>{var t;return t=e.id,void x(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"mt-1 accent-blue-500"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-xs font-bold uppercase",children:e.severity}),s.jsx("span",{className:"text-xs text-gray-500 bg-gray-800 px-2 py-0.5 rounded",children:e.type}),s.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:new Date(e.created_at).toLocaleString()})]}),s.jsx("p",{className:"text-sm font-medium text-white",children:e.title}),s.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:e.message}),e.agent_id&&(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Agent: ",e.agent_id]})]}),"open"===e.status&&s.jsx("button",{onClick:()=>g(e.id),className:"shrink-0 text-xs px-3 py-1 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-300",children:"确认"}),"acknowledged"===e.status&&s.jsx("span",{className:"shrink-0 text-xs text-gray-600",children:"已确认"})]})},e.id))]})]})}},1394:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var s=a(3227),r=a(649),l=a(1043),n=a(7674),i=a(1126);let o=[{href:"/dashboard",label:"总览",icon:"◉"},{href:"/dashboard/agents",label:"Agent",icon:"⬡"},{href:"/dashboard/rules",label:"规则",icon:"⚙"},{href:"/dashboard/logs",label:"日志",icon:"≡"},{href:"/dashboard/alerts",label:"告警",icon:"⚠"},{href:"/dashboard/settings",label:"设置",icon:"⊙"}];function d(){let e=(0,l.usePathname)();return(0,s.jsxs)("aside",{className:"w-52 shrink-0 bg-gray-900 border-r border-gray-800 flex flex-col min-h-screen",children:[(0,s.jsxs)("div",{className:"px-4 py-5 border-b border-gray-800",children:[s.jsx("span",{className:"font-bold text-white text-lg",children:"AgentGuard"}),s.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"v1.0"})]}),s.jsx("nav",{className:"flex-1 py-4 space-y-1 px-2",children:o.map(t=>(0,s.jsxs)(r.default,{href:t.href,className:(0,i.Z)("flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors",e===t.href?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[s.jsx("span",{children:t.icon}),s.jsx("span",{children:t.label})]},t.href))}),s.jsx("div",{className:"p-4 border-t border-gray-800",children:s.jsx("button",{onClick:n.kS,className:"w-full text-left text-xs text-gray-500 hover:text-gray-300 transition-colors",children:"退出登录"})})]})}},8946:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var s=a(3227),r=a(3677),l=a(7674);function n(){let[e,t]=(0,r.useState)({global:{paused:!1}}),[a,n]=(0,r.useState)(!1);async function i(){if(e.global.paused)await (0,l.SC)("/kill-switch/deactivate",{method:"POST",body:JSON.stringify({scope:"global"})}),t({global:{paused:!1}});else{if(!a){n(!0);return}await (0,l.SC)("/kill-switch/activate",{method:"POST",body:JSON.stringify({reason:"手动触发",scope:"global"})}),t({global:{paused:!0}}),n(!1)}}return(0,s.jsxs)("header",{className:"h-14 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-6 shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${e.global.paused?"bg-red-500":"bg-green-500"}`}),s.jsx("span",{className:"text-sm text-gray-400",children:e.global.paused?"已暂停":"运行中"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[a&&s.jsx("span",{className:"text-xs text-yellow-400",children:"再次点击确认暂停所有请求"}),s.jsx("button",{onClick:i,onBlur:()=>n(!1),className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-colors ${e.global.paused?"bg-green-700 hover:bg-green-600 text-white":a?"bg-red-500 hover:bg-red-400 text-white":"bg-red-900 hover:bg-red-800 text-red-300"}`,children:e.global.paused?"▶ 恢复服务":"■ Kill Switch"})]})]})}},7674:(e,t,a)=>{"use strict";a.d(t,{SC:()=>r,kS:()=>l});let s=process.env.NEXT_PUBLIC_API_URL||"/api";async function r(e,t){let a=await fetch(`${s}${e}`,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(401===a.status)throw Error("Unauthorized");if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||`HTTP ${a.status}`);return a.json()}function l(){localStorage.removeItem("ag_token"),window.location.href="/login"}},3243:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(3189).createProxy)(String.raw`G:\myaist\AgentGuard\packages\dashboard\src\app\dashboard\alerts\page.tsx#default`)},4341:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(9013),r=a(3189);let l=(0,r.createProxy)(String.raw`G:\myaist\AgentGuard\packages\dashboard\src\components\Sidebar.tsx#default`),n=(0,r.createProxy)(String.raw`G:\myaist\AgentGuard\packages\dashboard\src\components\TopBar.tsx#default`);function i({children:e}){return(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[s.jsx(l,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(n,{}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-950",children:e})]})]})}},7718:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l,metadata:()=>r});var s=a(9013);a(5556);let r={title:"AgentGuard",description:"AI Agent API 安全代理网关"};function l({children:e}){return s.jsx("html",{lang:"zh-CN",children:s.jsx("body",{className:"bg-gray-950 text-gray-100 min-h-screen",children:e})})}},5556:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[592,914],()=>a(3493));module.exports=s})();