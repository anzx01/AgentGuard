(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6598:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(8262),s(4341),s(7718),s(7824);var a=s(3282),r=s(5736),l=s(3906),n=s.n(l),d=s(6880),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);s.d(t,i);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8262)),"G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\dashboard\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4341)),"G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7718)),"G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7824,23)),"next/dist/client/components/not-found-error"]}],c=["G:\\myaist\\AgentGuard\\packages\\dashboard\\src\\app\\dashboard\\page.tsx"],x="/dashboard/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4224:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4424,23)),Promise.resolve().then(s.t.bind(s,7752,23)),Promise.resolve().then(s.t.bind(s,5275,23)),Promise.resolve().then(s.t.bind(s,9842,23)),Promise.resolve().then(s.t.bind(s,1633,23)),Promise.resolve().then(s.t.bind(s,9224,23))},139:(e,t,s)=>{Promise.resolve().then(s.bind(s,6664))},8144:()=>{},2684:(e,t,s)=>{Promise.resolve().then(s.bind(s,1394)),Promise.resolve().then(s.bind(s,8946))},6664:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(3227),r=s(3677);function l({label:e,value:t,sub:s,color:r="text-white"}){return(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-5",children:[a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:e}),a.jsx("p",{className:`text-2xl font-bold ${r}`,children:t}),s&&a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:s})]})}function n(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)([]),[d,i]=(0,r.useState)([]),o={critical:"text-red-400",high:"text-orange-400",medium:"text-yellow-400",low:"text-gray-400",info:"text-blue-400"};return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h1",{className:"text-xl font-semibold text-white",children:"总览"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(l,{label:"今日花费",value:`$${(e?.todaySpend??0).toFixed(2)}`,color:"text-green-400"}),a.jsx(l,{label:"本月花费",value:`$${(e?.monthSpend??0).toFixed(2)}`}),a.jsx(l,{label:"今日请求",value:e?.todayCalls??0}),a.jsx(l,{label:"今日阻断",value:e?.todayBlocked??0,color:e?.todayBlocked?"text-red-400":"text-white"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-5",children:[a.jsx("h2",{className:"text-sm font-medium text-gray-300 mb-4",children:"Agent 状态"}),e?.byAgent.length===0&&a.jsx("p",{className:"text-gray-500 text-sm",children:"暂无 Agent，请先创建"}),a.jsx("div",{className:"space-y-3",children:e?.byAgent.map(e=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),a.jsx("span",{className:"text-sm text-gray-200",children:e.name})]}),a.jsxs("span",{className:"text-sm text-gray-400",children:["$",e.todaySpend.toFixed(2)]})]},e.agentId))})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-5",children:[a.jsx("h2",{className:"text-sm font-medium text-gray-300 mb-4",children:"最近告警"}),0===s.length&&a.jsx("p",{className:"text-gray-500 text-sm",children:"暂无未处理告警"}),a.jsx("div",{className:"space-y-3",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:`text-xs font-bold uppercase mt-0.5 ${o[e.severity]??"text-gray-400"}`,children:e.severity}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-gray-200 truncate",children:e.title}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleTimeString()})]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-5",children:[a.jsx("h2",{className:"text-sm font-medium text-gray-300 mb-4",children:"最近请求"}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"text-gray-500 text-xs border-b border-gray-800",children:[a.jsx("th",{className:"text-left pb-2 font-normal",children:"时间"}),a.jsx("th",{className:"text-left pb-2 font-normal",children:"Agent"}),a.jsx("th",{className:"text-left pb-2 font-normal",children:"服务"}),a.jsx("th",{className:"text-left pb-2 font-normal",children:"状态"}),a.jsx("th",{className:"text-right pb-2 font-normal",children:"延迟"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:d.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-800/50",children:[a.jsx("td",{className:"py-2 text-gray-500 text-xs",children:new Date(e.timestamp).toLocaleTimeString()}),a.jsx("td",{className:"py-2 text-gray-300",children:e.agent_name??"-"}),a.jsx("td",{className:"py-2 text-gray-300",children:e.target_service}),a.jsx("td",{className:"py-2",children:a.jsx("span",{className:`text-xs font-medium ${"allow"===e.decision?"text-green-400":"text-red-400"}`,children:"allow"===e.decision?"✓ 通过":"✗ 阻断"})}),a.jsx("td",{className:"py-2 text-right text-gray-500 text-xs",children:e.latency_ms?`${e.latency_ms.toFixed(0)}ms`:"-"})]},e.id))})]}),0===d.length&&a.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"暂无请求记录"})]})]})]})}s(7674)},1394:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(3227),r=s(649),l=s(1043),n=s(7674),d=s(1126);let i=[{href:"/dashboard",label:"总览",icon:"◉"},{href:"/dashboard/agents",label:"Agent",icon:"⬡"},{href:"/dashboard/rules",label:"规则",icon:"⚙"},{href:"/dashboard/logs",label:"日志",icon:"≡"},{href:"/dashboard/alerts",label:"告警",icon:"⚠"},{href:"/dashboard/settings",label:"设置",icon:"⊙"}];function o(){let e=(0,l.usePathname)();return(0,a.jsxs)("aside",{className:"w-52 shrink-0 bg-gray-900 border-r border-gray-800 flex flex-col min-h-screen",children:[(0,a.jsxs)("div",{className:"px-4 py-5 border-b border-gray-800",children:[a.jsx("span",{className:"font-bold text-white text-lg",children:"AgentGuard"}),a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"v1.0"})]}),a.jsx("nav",{className:"flex-1 py-4 space-y-1 px-2",children:i.map(t=>(0,a.jsxs)(r.default,{href:t.href,className:(0,d.Z)("flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors",e===t.href?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[a.jsx("span",{children:t.icon}),a.jsx("span",{children:t.label})]},t.href))}),a.jsx("div",{className:"p-4 border-t border-gray-800",children:a.jsx("button",{onClick:n.kS,className:"w-full text-left text-xs text-gray-500 hover:text-gray-300 transition-colors",children:"退出登录"})})]})}},8946:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var a=s(3227),r=s(3677),l=s(7674);function n(){let[e,t]=(0,r.useState)({global:{paused:!1}}),[s,n]=(0,r.useState)(!1);async function d(){if(e.global.paused)await (0,l.SC)("/kill-switch/deactivate",{method:"POST",body:JSON.stringify({scope:"global"})}),t({global:{paused:!1}});else{if(!s){n(!0);return}await (0,l.SC)("/kill-switch/activate",{method:"POST",body:JSON.stringify({reason:"手动触发",scope:"global"})}),t({global:{paused:!0}}),n(!1)}}return(0,a.jsxs)("header",{className:"h-14 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-6 shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${e.global.paused?"bg-red-500":"bg-green-500"}`}),a.jsx("span",{className:"text-sm text-gray-400",children:e.global.paused?"已暂停":"运行中"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[s&&a.jsx("span",{className:"text-xs text-yellow-400",children:"再次点击确认暂停所有请求"}),a.jsx("button",{onClick:d,onBlur:()=>n(!1),className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-colors ${e.global.paused?"bg-green-700 hover:bg-green-600 text-white":s?"bg-red-500 hover:bg-red-400 text-white":"bg-red-900 hover:bg-red-800 text-red-300"}`,children:e.global.paused?"▶ 恢复服务":"■ Kill Switch"})]})]})}},7674:(e,t,s)=>{"use strict";s.d(t,{SC:()=>r,kS:()=>l});let a=process.env.NEXT_PUBLIC_API_URL||"/api";async function r(e,t){let s=await fetch(`${a}${e}`,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(401===s.status)throw Error("Unauthorized");if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||`HTTP ${s.status}`);return s.json()}function l(){localStorage.removeItem("ag_token"),window.location.href="/login"}},4341:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(9013),r=s(3189);let l=(0,r.createProxy)(String.raw`G:\myaist\AgentGuard\packages\dashboard\src\components\Sidebar.tsx#default`),n=(0,r.createProxy)(String.raw`G:\myaist\AgentGuard\packages\dashboard\src\components\TopBar.tsx#default`);function d({children:e}){return(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[a.jsx(l,{}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(n,{}),a.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-950",children:e})]})]})}},8262:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(3189).createProxy)(String.raw`G:\myaist\AgentGuard\packages\dashboard\src\app\dashboard\page.tsx#default`)},7718:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>r});var a=s(9013);s(5556);let r={title:"AgentGuard",description:"AI Agent API 安全代理网关"};function l({children:e}){return a.jsx("html",{lang:"zh-CN",children:a.jsx("body",{className:"bg-gray-950 text-gray-100 min-h-screen",children:e})})}},5556:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[592,914],()=>s(6598));module.exports=a})();